{% extends 'user/base.html'%}
{% load static %}
{% block content %}
<div class="container-fluid">
        <div class="row justify-content-center">
          <div class="col-12 col-lg-10 col-xl-8">

            <!-- Header -->
            <div class="header mt-md-5">
              <div class="header-body">
                <div class="row align-items-center">
                  <div class="col">

                    <!-- Pretitle -->
                    <h6 class="header-pretitle">
                      post by - {{ post.author }}
                    </h6>

                    <!-- Title -->
                    <h1 class="header-title">
                      {{ post.title }}
                    </h1>

                  </div>
                  <div class="col-auto">

                    <!-- Buttons -->
                    <a href="#!" class="btn btn-white">
                      Share
                    </a>


                  </div>
                </div> <!-- / .row -->
              </div>
            </div>

            <!-- Content -->
            <div class="card card-body p-5">

                <div class="col-12">
                  <center>
                    {% if post.cover_image %}
                        <img src="{{ post.cover_image.url }}" style="max-width: 600px;max-height: 300px;"/>
                    {% else %}
                        <img src="{% static 'dashboard\assets\img\covers\team-cover.jpg' %}" width="700px"/>
                    {% endif %}
                  </center>

                    <hr class="my-5">

                  <!-- Title -->
                  <h6 class="text-uppercase">
                    Description
                  </h6>
                  <div  media="(max-width: 700px)">
                      {{ post.description | safe }}
                  </div>
                  

                    <!-- Table -->
                  <div class="table-responsive">
                    <table class="table my-4">

                      <tbody>


                        <tr>
                          <td class="px-0 border-top border-top-2">
                           Written by <strong>{{ post.author }}</strong> on
                          </td>
                          <td colspan="2" class="px-0 text-right border-top border-top-2">
                            <span class="h3">
                              {{ post.created_on }}
                            </span>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>

                  <!-- Form -->
                <div class="row align-items-start">

                  <div class="col ml-n2">
                    {% if user.is_authenticated %}
                    <!-- Input -->
                    <form action="{% url 'add_comment' post.id %}" method="POST">{% csrf_token %}
                      <label class="sr-only">Leave a comment...</label>
                      <input type="number" name="user" value="{{ user.id}}" hidden>
                      <input type="text" name="name" value="{{ user.first_name}} {{ user.last_name }}" hidden>
                      <input type="email" name="email" value="{{ user.email }}" hidden>

                      <input type="text" name="text" class="form-control" placeholder="Leave a comment">
                      <button type="submit" hidden></button>

                      <br>

                    </form>
                    {% else %}

                    <form action="{% url 'add_comment' post.id %}" method="POST">{% csrf_token %}
                      <label class="sr-only">Leave a comment...</label>
                      <input type="text" name="name" value="" class="form-control" placeholder="Full Name" required>
                      <br>
                      <input type="email" name="email" value="" class="form-control" placeholder="Email" required>
                      <br>
                      <input type="text" name="text" class="form-control" placeholder="Leave a comment">
                      <button type="submit" hidden></button>

                      <br>

                    </form>

                    {% endif %}

                  </div>
                </div> <!-- / .row -->

                    <!-- Button -->
                  <div class="pagination" style="float: right;">
    <span class="step-links">
        {% if comments.has_previous %}
            <a href="?page=1">&laquo; first</a>
            <a href="?page={{ comments.previous_page_number }}">previous</a>
        {% endif %}

        <span class="current">
            Page {{ comments.number }} of {{ comments.paginator.num_pages }}.
        </span>

        {% if comments.has_next %}
            <a href="?page={{ comments.next_page_number }}">next</a>
            <a href="?page={{ comments.paginator.num_pages }}">last &raquo;</a>
        {% endif %}
    </span>
</div>

                  {% for comment in comments %}

                    <div class="comment mb-3">
                  <div class="row">

                    <div class="col ml-n2">



                      <!-- Body -->
                      <div class="comment-body">

                        <div class="row">
                          <div class="col">

                            <!-- Title -->
                            <h5 class="comment-title">
                              {{ comment.name }}
                            </h5>

                          </div>
                          <div class="col-auto">

                            <!-- Time -->
                            <time class="comment-time">
                              {{ comment.created_on }}
                            </time>

                          </div>
                        </div> <!-- / .row -->

                        <!-- Text -->
                        <p class="comment-text">
                          {{ comment.text }}
                        </p>

                      </div>

                    </div>
                  </div> <!-- / .row -->
                </div>
                  {% endfor %}



                </div>
              </div> <!-- / .row -->
            </div>

          </div>
        </div> <!-- / .row -->
      </div>
{% endblock %}
